name = "calcium-sync-worker"
main = "src/index.ts"
compatibility_date = "2024-08-11"

# Environment variables
[vars]
# Comma-separated list of allowed CORS origins for production
# Example: "https://calcium.example.com,https://calcium-app.example.com"
ALLOWED_ORIGINS = "https://calcium.eatonfamily.net"

# Production KV namespace for storing encrypted sync docs
# Create your KV namespace: wrangler kv namespace create "SYNC_KV"
# Then replace the ID below with your actual namespace ID
[[kv_namespaces]]
binding = "SYNC_KV"
id = "your_production_kv_namespace_id_here"

# Development environment
# Create dev KV namespace: wrangler kv namespace create "SYNC_KV" --env dev
# Then replace the ID below with your dev namespace ID
[env.dev]
name = "dev-calcium-sync-worker"

[env.dev.vars]
# Development CORS origins - includes localhost for testing
ALLOWED_ORIGINS = "http://localhost:5173,https://calcium-dev.eatonfamily.net,http://eatonmediasvr.local:8080,http://eatonmediasvr.local"

[[env.dev.kv_namespaces]]
binding = "SYNC_KV"
id = "your_dev_kv_namespace_id_here"